import tushare as ts
import pandas as pd
import datetime as dt

# 股票代码、指数代码
# Return DateFrame
ABOC = ts.get_hist_data(code='601288', start='2018-01-00', end=str(dt.date.today()), ktype='D', retry_count=3, pause=0.001)
ABOC = {"open":{"2018-01-23":4.37,"2018-01-22":4.44,"2018-01-19":4.42,"2018-01-18":4.27,"2018-01-17":4.15,"2018-01-16":4.11,"2018-01-15":4.02,"2018-01-12":4.0,"2018-01-11":3.91,"2018-01-10":3.82,"2018-01-09":3.85,"2018-01-08":3.88,"2018-01-05":3.87,"2018-01-04":3.88,"2018-01-03":3.83,"2018-01-02":3.84},"high":{"2018-01-23":4.52,"2018-01-22":4.53,"2018-01-19":4.48,"2018-01-18":4.39,"2018-01-17":4.32,"2018-01-16":4.18,"2018-01-15":4.17,"2018-01-12":4.04,"2018-01-11":4.0,"2018-01-10":3.92,"2018-01-09":3.88,"2018-01-08":3.89,"2018-01-05":3.9,"2018-01-04":3.91,"2018-01-03":3.9,"2018-01-02":3.94},"close":{"2018-01-23":4.48,"2018-01-22":4.38,"2018-01-19":4.48,"2018-01-18":4.38,"2018-01-17":4.22,"2018-01-16":4.15,"2018-01-15":4.11,"2018-01-12":4.02,"2018-01-11":3.99,"2018-01-10":3.9,"2018-01-09":3.83,"2018-01-08":3.86,"2018-01-05":3.87,"2018-01-04":3.87,"2018-01-03":3.89,"2018-01-02":3.85},"low":{"2018-01-23":4.33,"2018-01-22":4.34,"2018-01-19":4.35,"2018-01-18":4.26,"2018-01-17":4.14,"2018-01-16":4.05,"2018-01-15":4.01,"2018-01-12":3.99,"2018-01-11":3.9,"2018-01-10":3.81,"2018-01-09":3.82,"2018-01-08":3.84,"2018-01-05":3.85,"2018-01-04":3.85,"2018-01-03":3.83,"2018-01-02":3.77},"volume":{"2018-01-23":16348062.0,"2018-01-22":8013254.5,"2018-01-19":6059788.5,"2018-01-18":8076568.0,"2018-01-17":8547128.0,"2018-01-16":8429620.0,"2018-01-15":5515164.0,"2018-01-12":3452961.5,"2018-01-11":4006490.25,"2018-01-10":4192771.0,"2018-01-09":2526695.0,"2018-01-08":2326323.0,"2018-01-05":2454164.5,"2018-01-04":3151427.0,"2018-01-03":3073498.25,"2018-01-02":7985191.0},"price_change":{"2018-01-23":0.12,"2018-01-22":-0.09,"2018-01-19":0.11,"2018-01-18":0.16,"2018-01-17":0.07,"2018-01-16":0.03,"2018-01-15":0.1,"2018-01-12":0.03,"2018-01-11":0.08,"2018-01-10":0.07,"2018-01-09":-0.03,"2018-01-08":-0.01,"2018-01-05":0.0,"2018-01-04":-0.01,"2018-01-03":0.04,"2018-01-02":0.02},"p_change":{"2018-01-23":2.75,"2018-01-22":-2.01,"2018-01-19":2.52,"2018-01-18":3.79,"2018-01-17":1.69,"2018-01-16":0.73,"2018-01-15":2.49,"2018-01-12":0.75,"2018-01-11":2.05,"2018-01-10":1.83,"2018-01-09":-0.78,"2018-01-08":-0.26,"2018-01-05":0.0,"2018-01-04":-0.26,"2018-01-03":1.04,"2018-01-02":0.52},"ma5":{"2018-01-23":4.388,"2018-01-22":4.322,"2018-01-19":4.268,"2018-01-18":4.176,"2018-01-17":4.098,"2018-01-16":4.034,"2018-01-15":3.97,"2018-01-12":3.92,"2018-01-11":3.89,"2018-01-10":3.866,"2018-01-09":3.864,"2018-01-08":3.868,"2018-01-05":3.862,"2018-01-04":3.844,"2018-01-03":3.818,"2018-01-02":3.79},"ma10":{"2018-01-23":4.211,"2018-01-22":4.146,"2018-01-19":4.094,"2018-01-18":4.033,"2018-01-17":3.982,"2018-01-16":3.949,"2018-01-15":3.919,"2018-01-12":3.891,"2018-01-11":3.867,"2018-01-10":3.842,"2018-01-09":3.827,"2018-01-08":3.812,"2018-01-05":3.793,"2018-01-04":3.776,"2018-01-03":3.76,"2018-01-02":3.74},"ma20":{"2018-01-23":4.019,"2018-01-22":3.979,"2018-01-19":3.944,"2018-01-18":3.905,"2018-01-17":3.871,"2018-01-16":3.845,"2018-01-15":3.821,"2018-01-12":3.799,"2018-01-11":3.784,"2018-01-10":3.77,"2018-01-09":3.761,"2018-01-08":3.756,"2018-01-05":3.749,"2018-01-04":3.745,"2018-01-03":3.741,"2018-01-02":3.737},"v_ma5":{"2018-01-23":9408960.1999999993,"2018-01-22":7825271.7999999998,"2018-01-19":7325653.7000000002,"2018-01-18":6804288.2999999998,"2018-01-17":5990272.75,"2018-01-16":5119401.3499999996,"2018-01-15":3938816.3500000001,"2018-01-12":3301048.1499999999,"2018-01-11":3101288.75,"2018-01-10":2930276.1000000001,"2018-01-09":2706421.5499999998,"2018-01-08":3798120.75,"2018-01-05":3964899.5499999998,"2018-01-04":4081114.75,"2018-01-03":4067927.8500000001,"2018-01-02":4022879.3999999999},"v_ma10":{"2018-01-23":7264180.7800000003,"2018-01-22":5882044.0800000001,"2018-01-19":5313350.9299999997,"2018-01-18":4952788.5300000003,"2018-01-17":4460274.4299999997,"2018-01-16":3912911.4500000002,"2018-01-15":3868468.5499999998,"2018-01-12":3632973.8500000001,"2018-01-11":3591201.75,"2018-01-10":3499101.98,"2018-01-09":3364650.48,"2018-01-08":3315575.6499999999,"2018-01-05":3237220.0099999998,"2018-01-04":3172893.21,"2018-01-03":3059718.54,"2018-01-02":2959789.3399999999},"v_ma20":{"2018-01-23":5314415.6299999999,"2018-01-22":4598809.8600000003,"2018-01-19":4275285.4699999997,"2018-01-18":4062840.8700000001,"2018-01-17":3759996.48,"2018-01-16":3436350.3900000001,"2018-01-15":3096546.3599999999,"2018-01-12":2921529.6499999999,"2018-01-11":2835533.4399999999,"2018-01-10":2710740.5800000001,"2018-01-09":2574617.4399999999,"2018-01-08":2540948.2599999998,"2018-01-05":2534205.98,"2018-01-04":2509916.0899999999,"2018-01-03":2486606.3399999999,"2018-01-02":2568081.25},"turnover":{"2018-01-23":0.56,"2018-01-22":0.27,"2018-01-19":0.21,"2018-01-18":0.27,"2018-01-17":0.29,"2018-01-16":0.29,"2018-01-15":0.19,"2018-01-12":0.12,"2018-01-11":0.14,"2018-01-10":0.14,"2018-01-09":0.09,"2018-01-08":0.08,"2018-01-05":0.08,"2018-01-04":0.11,"2018-01-03":0.1,"2018-01-02":0.27}}
print(ABOC)


# 沪深上市公司基本信息
# From 2016-08-09
# ========== Error 404 NotFound ==========
HS = ts.get_stock_basics(date=str(dt.date.today()))
print(HS)


# 获取最近交易日所有股票交易数据
# Return DataFrame 代码、名称、涨幅、现价、开盘价、最高价、最低价、昨日收盘价、成交量、换手率、成交额、市盈率、市净率、市值、流通值
TODAY = ts.get_today_all()


# 历史交易日分笔交易数据
#  数据源选择: src
#   sn : 新浪
#   tt : 腾讯
#   nt : 网易
# Return DataFrame
TICK = ts.get_tick_data(code='601288', date='2018-01-22', retry_count=3, pause=0.001, src='sn')


# 实时分笔交易数据
# Return DataFrame 名称、今开、昨收、当前价格、今日最高、今日最低、竞买价（买一）、竞卖价（卖一）、成交量、成交额、委买一_v:笔数、委买一_p:价格 ……
REL_TICK = ts.get_realtime_quotes(symbols=['601288'])


# 获取大单交易数据 - 来源新浪
# Return DataFrame 股票代码、股票名称、交易时间、价格、成交量、上一笔价格、类型（买卖中性）
BIG = ts.get_sina_dd(code='601288', date='2018-01-23', vol=10000)


# 大盘指数
# Return DataFrame 指数代码、指数名称、涨跌幅、开盘价、昨收价、收盘价、最高价、最低价、成交量、成交额
INDEX = ts.get_index()


# 获取新股上市数据
# Return DataFrame 股票代码、申购代码、名称、IPO日期、上市日期、发行量（万股）、上市数量、发行价格、市盈率、个人申购上限、募集资金、中签率
NEW = ts.new_stocks()